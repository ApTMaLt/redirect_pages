<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Открытие Яндекс.Карт</title>
<script>
  window.onload = function() {
    const params = new URLSearchParams(window.location.search);
    const lat = params.get('lat') || '51.661107';
    const lon = params.get('lon') || '39.194151';
    const name = encodeURIComponent(params.get('name') || 'Шоколадница');
    const zoom = params.get('z') || '17';

    const yandexAppLink = `yandexmaps://maps/?ll=${lon},${lat}&z=${zoom}&text=${name}`;
    const yandexWebLink = `https://yandex.ru/maps/?ll=${lon},${lat}&z=${zoom}&text=${name}`;

    const start = Date.now();
    window.location = yandexAppLink;

    setTimeout(() => {
      if (Date.now() - start < 1500) {
        window.location = yandexWebLink;
      }
    }, 1200);
  };
</script>
</head>
<body>
<p>Открываем Яндекс.Карты…</p>
</body>
</html>
